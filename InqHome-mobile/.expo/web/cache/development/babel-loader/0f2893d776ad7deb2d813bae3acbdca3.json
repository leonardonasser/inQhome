{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\ADS\\\\InqHome_gitlab2\\\\projeto\\\\InqHome-mobile\\\\src\\\\pages\\\\home\\\\home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport MapView, { Marker } from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport * as Permissions from 'expo-permissions';\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\nimport { homeStyle } from \"./style\";\nimport { useNavigation } from '@react-navigation/native';\nimport { FAB } from 'react-native-paper';\nimport { MyComponent } from \"../../components/fabButton\";\nimport api from \"../service/api\";\nimport MarkerMap from \"../../components/markerMap\";\nexport default function Home() {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalAnuncio = _useState2[0],\n      setModalAnuncio = _useState2[1];\n\n  var navigation = useNavigation();\n\n  var irToAnuncio = function irToAnuncio() {\n    navigation.navigate('Anuncio', {\n      photosir: []\n    });\n  };\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      anuncios = _useState4[0],\n      setAnuncios = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      origin = _useState6[0],\n      setOrigin = _useState6[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Permissions$as, status, permissions, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION));\n\n            case 2:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n              permissions = _await$Permissions$as.permissions;\n\n              if (!(status === 'granted')) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({\n                enableHighAccuracy: true\n              }));\n\n            case 8:\n              location = _context.sent;\n              setOrigin({\n                latitude: location.coords.latitude,\n                longitude: location.coords.longitude,\n                latitudeDelta: 0.0143,\n                longitudeDelta: 0.0134\n              });\n              api.get(\"anuncio\").then(function (response) {\n                console.log('Busca anÃºncios com sucesso!' + response.data);\n                setAnuncios(response.data);\n              });\n              _context.next = 14;\n              break;\n\n            case 13:\n              throw new Error('Location permission not granted');\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: homeStyle.filtro,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, React.createElement(GooglePlacesAutocomplete, {\n    placeholder: \"Search\",\n    fetchDetails: true,\n    onPress: function onPress(data) {\n      var details = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      setOrigin({\n        latitude: details.geometry.location.lat,\n        longitude: details.geometry.location.lng,\n        latitudeDelta: 0.0143,\n        longitudeDelta: 0.0134\n      });\n    },\n    query: {\n      key: 'AIzaSyCqtH6mpePIrYeZmzyDdGktYIuiLtT4mfE',\n      language: 'pt-br'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  })), React.createElement(MapView, {\n    style: homeStyle.map,\n    region: origin,\n    showsUserLocation: true,\n    loadingEnabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, anuncios.map(function (anuncio, index) {\n    return React.createElement(MarkerMap, {\n      key: index,\n      lat: anuncio.casa.lat,\n      lng: anuncio.casa.lng,\n      titulo: anuncio.titulo,\n      valorAluguel: anuncio.casa.valorAluguel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    });\n  })), React.createElement(View, {\n    style: homeStyle.fabView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, React.createElement(FAB, {\n    small: true,\n    icon: \"plus\",\n    style: homeStyle.fab,\n    onPress: irToAnuncio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  })), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalAnuncio,\n    onRequestClose: function onRequestClose() {\n      Alert.alert(\"Modal has been closed.\");\n      setModalAnuncio(!modalAnuncio);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: homeStyle.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: homeStyle.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: homeStyle.modalText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Hello World!\"), React.createElement(Pressable, {\n    style: [homeStyle.button, homeStyle.buttonClose],\n    onPress: function onPress() {\n      return setModalAnuncio(!modalAnuncio);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: homeStyle.textStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Hide Modal\"))))));\n}","map":{"version":3,"sources":["C:/Users/User/Desktop/ADS/InqHome_gitlab2/projeto/InqHome-mobile/src/pages/home/home.js"],"names":["React","useState","useEffect","MapView","Marker","Location","Permissions","GooglePlacesAutocomplete","homeStyle","useNavigation","FAB","MyComponent","api","MarkerMap","Home","modalAnuncio","setModalAnuncio","navigation","irToAnuncio","navigate","photosir","anuncios","setAnuncios","origin","setOrigin","askAsync","LOCATION","status","permissions","getCurrentPositionAsync","enableHighAccuracy","location","latitude","coords","longitude","latitudeDelta","longitudeDelta","get","then","response","console","log","data","Error","filtro","details","geometry","lat","lng","key","language","map","anuncio","index","casa","titulo","valorAluguel","fabView","fab","Alert","alert","centeredView","modalView","modalText","button","buttonClose","textStyle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Text, View, Modal, Pressable } from 'react-native';\r\nimport MapView, { Marker } from 'react-native-maps';\r\nimport * as Location from 'expo-location';\r\nimport * as Permissions from 'expo-permissions';\r\nimport { GooglePlacesAutocomplete } from 'react-native-google-places-autocomplete';\r\nimport { homeStyle } from './style';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { FAB } from 'react-native-paper';\r\nimport { MyComponent } from '../../components/fabButton'\r\nimport api from '../service/api';\r\nimport MarkerMap from '../../components/markerMap';\r\n\r\n\r\nexport default function Home() {\r\n\r\n  const [modalAnuncio, setModalAnuncio] = useState(false);\r\n\r\n  const navigation = useNavigation();\r\n\r\n  const irToAnuncio = () => {\r\n    navigation.navigate('Anuncio', { photosir: [] });\r\n  }\r\n\r\n  const [anuncios, setAnuncios] = useState([]);\r\n\r\n  const [origin, setOrigin] = useState(null);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      const { status, permissions } = await Permissions.askAsync(Permissions.LOCATION);\r\n      if (status === 'granted') {\r\n        let location = await Location.getCurrentPositionAsync({ enableHighAccuracy: true });\r\n        setOrigin({\r\n          latitude: location.coords.latitude,\r\n          longitude: location.coords.longitude,\r\n          latitudeDelta: 0.0143,\r\n          longitudeDelta: 0.0134,\r\n        })\r\n\r\n\r\n        api.get(\"anuncio\").then((response) => {\r\n          console.log('Busca anÃºncios com sucesso!' + response.data)\r\n          setAnuncios(response.data);\r\n        });\r\n\r\n      } else {\r\n        throw new Error('Location permission not granted');\r\n      }\r\n    })();\r\n  }, [])\r\n\r\n  return (\r\n    <View>\r\n\r\n\r\n      <View style={homeStyle.filtro}>\r\n\r\n        <GooglePlacesAutocomplete\r\n          placeholder='Search'\r\n          fetchDetails={true}\r\n          onPress={(data, details = null) => {\r\n\r\n            setOrigin({\r\n              latitude: details.geometry.location.lat,\r\n              longitude: details.geometry.location.lng,\r\n              latitudeDelta: 0.0143,\r\n              longitudeDelta: 0.0134,\r\n            })\r\n\r\n          }}\r\n          query={{\r\n            key: 'AIzaSyCqtH6mpePIrYeZmzyDdGktYIuiLtT4mfE',\r\n            language: 'pt-br',\r\n          }}\r\n        />\r\n\r\n\r\n      </View>\r\n\r\n      <MapView\r\n        style={homeStyle.map}\r\n        region={origin}\r\n        showsUserLocation={true}\r\n        loadingEnabled={true}\r\n      >\r\n\r\n        {\r\n          anuncios.map((anuncio, index) => (\r\n            <MarkerMap key={index} lat={anuncio.casa.lat} lng={anuncio.casa.lng} titulo={anuncio.titulo} valorAluguel={anuncio.casa.valorAluguel} />\r\n          ))\r\n        }\r\n\r\n      </MapView>\r\n\r\n      <View style={homeStyle.fabView}>\r\n\r\n        <FAB\r\n          small\r\n          icon=\"plus\"\r\n          style={homeStyle.fab}\r\n          onPress={irToAnuncio}\r\n        />\r\n\r\n      </View>\r\n\r\n\r\n      <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={modalAnuncio}\r\n        onRequestClose={() => {\r\n          Alert.alert(\"Modal has been closed.\");\r\n          setModalAnuncio(!modalAnuncio);\r\n        }}\r\n      >\r\n        <View style={homeStyle.centeredView}>\r\n          <View style={homeStyle.modalView}>\r\n            <Text style={homeStyle.modalText}>Hello World!</Text>\r\n            <Pressable\r\n              style={[homeStyle.button, homeStyle.buttonClose]}\r\n              onPress={() => setModalAnuncio(!modalAnuncio)}\r\n            >\r\n              <Text style={homeStyle.textStyle}>Hide Modal</Text>\r\n            </Pressable>\r\n          </View>\r\n        </View>\r\n\r\n      </Modal>\r\n\r\n\r\n\r\n\r\n    </View>\r\n\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}